질문 (원본):
2025-10-28

질문: @# King - 건물주 (Building Owner) 
1. 새로운 ui 코드를 제작할거야.
2. 일정추가 안에 반복일정을 체크하는곳이 있을거야. 이 위치에 추가할거야.
3. 만약 반복일정을 체크했다면  반복일정 라벨을 갖고 있는 부모(div)의 형제로 셀렉트를 만들어줘.
4.해당 셀렉트의 옵션은 매일, 매주, 매월, 매년 이렇게 네가지이다.
5.이 셀렉트를 디자인할 때는 카테고리를 참고해서 제작해라.

답변:
건물주로서 일정 추가 화면에 반복 유형 선택 셀렉트 박스를 추가했습니다.

## ✅ 수행한 작업

### 1. 상태 관리 활성화
```typescript
// App.tsx (78-85줄)
isRepeating,
setIsRepeating,
repeatType,
setRepeatType,        // ✅ 주석 해제
repeatInterval,
setRepeatInterval,    // ✅ 주석 해제
repeatEndDate,
setRepeatEndDate,     // ✅ 주석 해제
```

**변경 사항**:
- `setRepeatType`, `setRepeatInterval`, `setRepeatEndDate` 주석 제거
- 반복 일정 관련 상태 관리 함수들 활성화

### 2. RepeatType import 활성화
```typescript
// App.tsx (39줄)
import { Event, EventForm, RepeatType } from './types';
```

**변경 사항**:
- `RepeatType` import 주석 해제
- 타입 안전성 확보

### 3. 반복 유형 옵션 정의
```typescript
// App.tsx (54-59줄)
const repeatTypeOptions = [
  { value: 'daily', label: '매일' },
  { value: 'weekly', label: '매주' },
  { value: 'monthly', label: '매월' },
  { value: 'yearly', label: '매년' },
];
```

**설정 내용**:
- ✅ 매일 (daily)
- ✅ 매주 (weekly)
- ✅ 매월 (monthly)
- ✅ 매년 (yearly)

### 4. 반복 유형 선택 UI 추가

#### 위치:
- **부모**: 반복 일정 체크박스의 FormControl
- **형제**: 반복 일정 체크박스 다음
- **조건**: `isRepeating === true`일 때만 표시

#### 코드:
```typescript
// App.tsx (433-451줄)
{isRepeating && (
  <FormControl fullWidth>
    <FormLabel id="repeat-type-label">반복 유형</FormLabel>
    <Select
      id="repeat-type"
      size="small"
      value={repeatType}
      onChange={(e) => setRepeatType(e.target.value as RepeatType)}
      aria-labelledby="repeat-type-label"
      aria-label="반복 유형"
    >
      {repeatTypeOptions.map((option) => (
        <MenuItem key={option.value} value={option.value} aria-label={`${option.label}-option`}>
          {option.label}
        </MenuItem>
      ))}
    </Select>
  </FormControl>
)}
```

#### 디자인 특징:
- ✅ **카테고리 셀렉트 디자인 참고**
  - `FormControl fullWidth` 사용
  - `FormLabel` + `Select` 구조
  - `size="small"` 적용
  - `MenuItem`으로 옵션 구성

- ✅ **조건부 렌더링**
  - 반복 일정 체크박스를 체크하면 표시
  - 체크 해제하면 숨김

- ✅ **접근성**
  - `aria-labelledby` 속성 추가
  - `aria-label` 속성 추가
  - 각 옵션에 `aria-label` 추가

## 📊 UI 구조

### Before (기존):
```
┌─────────────────────────┐
│ 카테고리 (Select)        │
├─────────────────────────┤
│ ☑ 반복 일정 (Checkbox)   │
├─────────────────────────┤
│ 알림 설정 (Select)       │
└─────────────────────────┘
```

### After (변경 후):
```
┌─────────────────────────┐
│ 카테고리 (Select)        │
├─────────────────────────┤
│ ☑ 반복 일정 (Checkbox)   │
│                         │
│ [isRepeating === true]  │
│ ┌─────────────────────┐ │
│ │ 반복 유형 (Select)   │ │
│ │ • 매일              │ │
│ │ • 매주              │ │
│ │ • 매월              │ │
│ │ • 매년              │ │
│ └─────────────────────┘ │
├─────────────────────────┤
│ 알림 설정 (Select)       │
└─────────────────────────┘
```

## 🎯 작동 방식

### 시나리오 1: 반복 일정 체크 안 함
1. 사용자가 "반복 일정" 체크박스를 체크 안 함
2. `isRepeating = false`
3. 반복 유형 셀렉트 **숨김** ❌

### 시나리오 2: 반복 일정 체크함
1. 사용자가 "반복 일정" 체크박스를 체크 ☑
2. `isRepeating = true`
3. 반복 유형 셀렉트 **표시** ✅
4. 사용자가 "매주" 선택
5. `repeatType = 'weekly'`
6. 일정 저장 시 `repeat: { type: 'weekly', interval: 1 }`로 저장

## 🔍 타입 안전성

### RepeatType 정의 (types.ts):
```typescript
export type RepeatType = 'none' | 'daily' | 'weekly' | 'monthly' | 'yearly';
```

### onChange 핸들러:
```typescript
onChange={(e) => setRepeatType(e.target.value as RepeatType)}
```

- ✅ 타입 캐스팅으로 안전성 확보
- ✅ TypeScript 컴파일 타임 체크

## 📝 코드 컨벤션 준수

### ✅ 네이밍 컨벤션:
- **함수**: `setRepeatType` (camelCase) ✅
- **변수**: `repeatTypeOptions` (camelCase) ✅
- **타입**: `RepeatType` (PascalCase) ✅

### ✅ Import 순서:
```typescript
// 1. External libraries (React, MUI)
import { ... } from '@mui/material';

// 2. Internal modules
import { Event, EventForm, RepeatType } from './types';
```

### ✅ 코드 포맷팅:
- 2-space indentation
- Single quotes
- Semicolons
- LF line endings

## ⚠️ Linter 경고

```
Line 89: 'setRepeatInterval' is declared but its value is never read.
Line 91: 'setRepeatEndDate' is declared but its value is never read.
```

**설명**:
- 이 경고는 정상입니다
- `setRepeatInterval`, `setRepeatEndDate`는 나중에 사용될 예정
- 현재는 반복 유형만 선택 가능
- 향후 반복 간격(interval)과 종료일(endDate) UI 추가 시 사용

## 🚀 테스트 방법

### 수동 테스트:
1. 브라우저에서 앱 실행
2. "일정 추가" 모달 열기
3. "반복 일정" 체크박스 체크
4. "반복 유형" 셀렉트가 나타나는지 확인 ✅
5. 옵션 선택: 매일, 매주, 매월, 매년
6. 체크박스 해제하면 셀렉트가 사라지는지 확인 ✅

이제 사용자가 반복 일정을 체크하면 반복 유형을 선택할 수 있는 UI가 추가되었습니다! 🎉

