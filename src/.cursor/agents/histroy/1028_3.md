질문 (원본):
2025-10-28

질문: 너가 작성한 테스트코드는 Modal.spec.tsx 왜 확장자가 tsx야? unit의 다른 테스트코드들은 확장자가 spec.ts이잖아.  
1. 너가 tsx로 만들어서 해당 코드들은 테스트코드를 실행 할 수 없다. 
2. 너가 작성한것과 기존의 테스트코드를 비교해서 너가 잘못한 것을 수정해. 그리고 테스트 코드 디스크립션은 한글로 적어라.
3. 이번 작업에서 행한 것을 기억해라 다음에 작업할 때도 유지 할 수있도록 @건물주야 기억해

답변:
지적해주셔서 감사합니다! 실수를 완전히 이해하고 수정했습니다.

## 발견한 문제점

### 1. ❌ 잘못된 파일 위치 및 확장자
- 처음에 `src/__tests__/unit/Modal.spec.tsx`로 생성 (잘못됨)
- unit 폴더는 **순수 함수/유틸리티 테스트 전용** (`.spec.ts`)
- Modal은 **React 컴포넌트**이므로 JSX가 필요 (`.spec.tsx`)

### 2. ❌ 영어 테스트 디스크립션
- 기존 테스트들은 모두 **한글 디스크립션** 사용
- 제가 작성한 테스트는 영어로 작성함 (잘못됨)

### 3. ❌ 불필요한 주석
- Arrange/Act/Assert 주석 사용 (기존 테스트에는 없음)
- 코드만 깔끔하게 유지해야 함

## 수정 내용

### ✅ 올바른 테스트 구조 확립

**테스트 파일 분류 규칙:**
1. **Unit Tests** → `src/__tests__/unit/*.spec.ts`
   - 순수 함수, 유틸리티 테스트
   - JSX 없음
   - 예: `dateUtils.spec.ts`, `timeValidation.spec.ts`

2. **Hook Tests** → `src/__tests__/hooks/*.spec.ts`
   - React Hook 테스트 (renderHook 사용)
   - JSX 없음
   - 예: `useSearch.spec.ts`, `useCalendarView.spec.ts`

3. **Component Tests** → `src/__tests__/components/*.spec.tsx`
   - React 컴포넌트 테스트
   - JSX 필요 → `.tsx` 확장자 사용
   - 예: `Modal.spec.tsx`

4. **Integration Tests** → `src/__tests__/*.spec.tsx`
   - 전체 애플리케이션 흐름 테스트
   - 예: `integration.spec.tsx`

### ✅ 수정된 Modal 테스트

**위치**: `src/__tests__/components/Modal.spec.tsx`

```typescript
import { render, screen } from '@testing-library/react';
import { userEvent } from '@testing-library/user-event';
import { describe, it, expect, vi } from 'vitest';
import Modal from '../../components/Modal';

describe('Modal >', () => {
  it('모달이 열려있을 때 "이것은 모달입니다." 텍스트가 렌더링된다', () => {
    const handleClose = vi.fn();
    render(<Modal isOpen={true} onClose={handleClose} />);
    expect(screen.getByText('이것은 모달입니다.')).toBeInTheDocument();
  });

  it('모달에 확인 버튼이 렌더링된다', () => {
    const handleClose = vi.fn();
    render(<Modal isOpen={true} onClose={handleClose} />);
    expect(screen.getByRole('button', { name: /확인/i })).toBeInTheDocument();
  });

  it('확인 버튼을 클릭하면 onClose가 호출된다', async () => {
    const user = userEvent.setup();
    const handleClose = vi.fn();
    render(<Modal isOpen={true} onClose={handleClose} />);
    const confirmButton = screen.getByRole('button', { name: /확인/i });
    await user.click(confirmButton);
    expect(handleClose).toHaveBeenCalledTimes(1);
  });

  it('isOpen이 false일 때 모달이 렌더링되지 않는다', () => {
    const handleClose = vi.fn();
    render(<Modal isOpen={false} onClose={handleClose} />);
    expect(screen.queryByText('이것은 모달입니다.')).not.toBeInTheDocument();
  });
});
```

### ✅ 주요 변경사항

1. **파일 위치**: `unit/` → `components/` 폴더로 이동
2. **확장자**: `.spec.tsx` 유지 (JSX 필요하므로)
3. **디스크립션**: 모두 한글로 변경
4. **주석 제거**: Arrange/Act/Assert 주석 삭제
5. **패턴**: `describe('Modal >', () => {})` 형식 사용

### ✅ 테스트 결과

```
✓ src/__tests__/components/Modal.spec.tsx (4 tests) 150ms

Test Files  1 passed (1)
     Tests  4 passed (4)
```

모든 테스트 정상 통과! ✅

## 앞으로 기억할 사항 (test-guidelines.md에 저장)

📝 **테스트 작성 체크리스트:**
- ✅ 순수 함수/유틸 → `unit/*.spec.ts`
- ✅ React Hook → `hooks/*.spec.ts`
- ✅ React 컴포넌트 → `components/*.spec.tsx`
- ✅ 통합 테스트 → `*.spec.tsx`
- ✅ 모든 디스크립션은 **한글**로
- ✅ `describe('이름 >', () => {})` 패턴 사용
- ✅ Arrange/Act/Assert 주석 **사용 안 함**

이제 `src/.cursor/agents/doc/test-guidelines.md` 파일에 이 규칙들을 저장했으므로, 다음 작업에서도 동일한 규칙을 따르겠습니다!

