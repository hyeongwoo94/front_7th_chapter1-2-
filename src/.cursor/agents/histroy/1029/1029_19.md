질문 (원본):
2025-10-29

질문: 리뷰해
오류사항
1. 일정이 겹쳤을때 알림에 계속진행이 나온다. => 계속 진행은 일반 일정과 반복일정이 겹쳤을 때만 나와야 한다.
2. 계속 진행을 눌렀을경우 일정 추가가 된다음 일정추가폼이 리셋이 되지 않는다.

답변:

# King의 버그 검토 및 요청 문서 생성 ✅

**검토일**: 2025-10-29
**King (건물주)**

---

## 🔍 버그 분석 결과

### Bug 1: 겹침 다이얼로그 로직 오류 🐛

**문제 위치**: `src/App.tsx` line 172-179, 656-715

**현재 동작**:
```typescript
// Line 172-179
const overlapping = findOverlappingEvents(eventData, events);
if (overlapping.length > 0) {
  setOverlappingEvents(overlapping);
  setIsOverlapDialogOpen(true);  // 항상 다이얼로그 표시
}

// Line 656-715: Dialog
<DialogActions>
  <Button>취소</Button>
  <Button>계속 진행</Button>  // 항상 표시 ❌
</DialogActions>
```

**문제점**:
- 모든 겹침에 대해 "계속 진행" 버튼이 나옴
- 일반 + 일반 일정 겹침도 bypass 가능 (잘못됨)

**올바른 동작**:
- 반복 일정 + 일반 일정 겹침 → "계속 진행" 표시 ✅
- 일반 + 일반 일정 겹침 → "계속 진행" 숨김 ❌
- 반복 + 반복 일정 겹침 → "계속 진행" 숨김 ❌

---

### Bug 2: 폼 리셋 누락 🐛

**문제 위치**: `src/App.tsx` line 673-710

**현재 동작**:
```typescript
// "계속 진행" 클릭 시
onClick={() => {
  setIsOverlapDialogOpen(false);
  saveEvent({ ...eventData });  // 저장만 함
  // resetForm() 호출 안 됨 ❌
}}
```

**비교: 정상 저장 시 (line 177-179)**:
```typescript
// 겹침 없을 때
await saveEvent(eventData);
resetForm();  // 리셋 있음 ✅
```

**문제점**:
- "계속 진행"으로 저장 시 폼 리셋 안 됨
- 사용자가 수동으로 모든 필드 클리어 필요

---

## 📄 생성된 요청 문서

**파일**: `src/.cursor/agents/request/fix-overlap-dialog-bugs.md`

### Section 2: Input → Output (핵심)

#### Bug 1 해결 방안

**Case 1: Normal + Normal**
```
Input: 두 일반 일정 겹침
Output: "취소"만 표시, bypass 불가
```

**Case 2: Recurring + Normal**
```
Input: 반복 + 일반 일정 겹침
Output: "취소" + "계속 진행" 표시, bypass 가능
```

**Case 3: Recurring + Recurring**
```
Input: 두 반복 일정 겹침
Output: "취소"만 표시, bypass 불가
```

#### Bug 2 해결 방안

```typescript
// "계속 진행" 클릭 후
await saveEvent(eventData);
resetForm();  // 추가 필요 ✅
```

---

## ✅ Quality Gate 검토 결과

### ✅ Section 1 (Feature Overview)
- What: 명확 ✅
- Why: 사용자 영향 설명 ✅
- User Story: 구체적 ✅

### ✅ Section 2 (Input → Output) ⭐
- **Before/After 비교**: 3가지 케이스 모두 명시 ✅
- **구체적 데이터 예시**: repeat.type 값 포함 ✅
- **Expected Output**: 각 케이스별 다이얼로그 동작 명확 ✅

### ✅ Section 4 (Implementation Checklist)
- Must Have: 2개 버그 모두 포함 ✅
- 구체적 작업 항목 (체크박스) ✅
- Edge Cases 고려 ✅

### ✅ Section 5 (Success Criteria)
- 측정 가능한 기준 ✅
- 테스트 케이스 명시 ✅

### ✅ Technical Notes
- 수정할 파일: App.tsx 명시 ✅
- 현재 코드 위치 (line numbers) ✅
- Helper function 예시 제공 ✅

---

## 🎯 Human-in-the-Loop: 사용자 컨펌 요청

**✅ Request document is ready**: `request/fix-overlap-dialog-bugs.md`

**All critical sections completed**:
- ✅ Feature Overview: 2개 버그 명확히 정의
- ✅ Input → Output: 3가지 케이스 구체적 예시
- ✅ Success Criteria: 테스트 가능한 기준

**구현 계획**:
1. **Worker (노동자)**: TDD로 구현
   - Red: 테스트 작성 (3가지 케이스)
   - Green: 최소 구현
   - Refactor: 코드 개선
2. **Manager (관리자)**: 품질 검토
   - TDD 준수 확인
   - 테스트 커버리지 확인

**예상 소요 시간**: 1-2 hours

---

## 🤔 사용자 결정 필요

**옵션 1: 즉시 구현 진행** ✅
- Worker에게 작업 지시
- TDD 사이클로 구현
- Manager 검토 후 배포

**옵션 2: 요청 문서 수정**
- Section 추가/수정 필요 시
- Planner가 재작성

---

**어떻게 진행하시겠습니까?**

1. **즉시 구현** → "구현 시작" 또는 "Worker 시작"
2. **문서 수정** → 수정 사항 알려주세요
3. **추가 질문** → 궁금한 점 알려주세요

